(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[799],{5437:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/concepts/action-routing",function(){return t(7771)}])},7771:function(e,n,t){"use strict";t.r(n),t.d(n,{__toc:function(){return a}});var s=t(2676),i=t(3313),o=t(8136),r=t(3717);t(681);var l=t(5594);let a=[{depth:2,value:"Quick initalization",id:"quick-initalization"},{depth:2,value:"Better Initalization (optional)",id:"better-initalization-optional"}];function c(e){let n=Object.assign({h1:"h1",p:"p",code:"code",blockquote:"blockquote",strong:"strong",h2:"h2",pre:"pre",span:"span"},(0,l.a)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{children:"Action Router"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"ActionRouter"})," is the main component behind all this magic ✨. This creates\nan entry point for the associated action request. In simple words, the server actions\nwhich are defined on a particular ",(0,s.jsx)(n.code,{children:"instance"})," of ",(0,s.jsx)(n.code,{children:"ActionRouter"})," will start their execution\njourney from that router instance."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\uD83D\uDCDD ",(0,s.jsx)(n.strong,{children:"NOTE"}),":\nFor example project structure reference, click ",(0,s.jsx)(n.strong,{children:(0,s.jsx)("a",{style:{textDecoration:"underline"},href:"/concepts#file-conventions",children:"here"})})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"quick-initalization",children:"Quick initalization"}),"\n",(0,s.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// lib/action.router.ts"})}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" { ActionRouter } "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"next-server-action/server"'}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// let's call this as root router"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"rootRouter"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ActionRouter"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]})]})}),"\n",(0,s.jsx)(n.p,{children:"This is enough to get you started with the action routing\nbut there's a slightly better way to initalize the router instance\nif you want to have type inference for error codes in your react client\ncomponents. Don't worry\nif didn't get the point, you'll get it just keep reading."}),"\n",(0,s.jsx)(n.h2,{id:"better-initalization-optional",children:"Better Initalization (optional)"}),"\n",(0,s.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// lib/action.router.ts"})}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" { ActionRouter } "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"next-server-action/server"'}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// let's call this as root router"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"rootRouter"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ActionRouter"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  error"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// predefined error codes at router instance level"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    codes"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      unauthorized"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"You are unauthorized"'}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"not-found"'}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Requested resource not found"'}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"rate-limit-exceeded"'}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Rate limit exceeded. please try again after some time"'}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  }"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"});"})})]})}),"\n",(0,s.jsx)(n.p,{children:"While initalizing router instance, you can define all the error codes\nwhich can be used to return descriptive error messages to the client and\ncool thing about this is error codes are inferred everywhere even\non the react components. This is really helpfull to write more robust\ncomponents and enhance user experience. This is really cool, I just love ❤️ it!"})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,l.a)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"pages/concepts/action-routing.mdx",route:"/concepts/action-routing",timestamp:1722432739e3,pageMap:[{kind:"Meta",data:{index:{title:"Intro and Features",theme:{footer:!1}},installation:{title:"Installation",theme:{footer:!1}},concepts:{title:"Concepts (10-15 mins)",theme:{footer:!1}},usage:{title:"Usage",theme:{footer:!1}},examples:{title:"Examples",type:"page"},api:{title:"API Reference",type:"page"},types:"Types"}},{kind:"Folder",name:"concepts",route:"/concepts",children:[{kind:"Meta",data:{index:{title:"Start here",theme:{footer:!1}},"action-routing":{title:"1. Action routing",theme:{footer:!1}},middlewares:{title:"2. Middlewares",theme:{footer:!1}},"input-validation":{title:"3. Input Validation",theme:{footer:!1}},"action-handler":{title:"4. Action handler",theme:{footer:!1}}}},{kind:"MdxPage",name:"action-handler",route:"/concepts/action-handler"},{kind:"MdxPage",name:"action-routing",route:"/concepts/action-routing"},{kind:"MdxPage",name:"index",route:"/concepts"},{kind:"MdxPage",name:"input-validation",route:"/concepts/input-validation"},{kind:"MdxPage",name:"middlewares",route:"/concepts/middlewares"}]},{kind:"Folder",name:"examples",route:"/examples",children:[{kind:"MdxPage",name:"index",route:"/examples"},{kind:"Meta",data:{index:"Index"}}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"installation",route:"/installation"},{kind:"MdxPage",name:"types",route:"/types"},{kind:"Folder",name:"usage",route:"/usage",children:[{kind:"MdxPage",name:"index",route:"/usage"},{kind:"Meta",data:{index:"Index"}}]}],flexsearch:{codeblocks:!0},title:"Action Router",headings:a},pageNextRoute:"/concepts/action-routing",nextraLayout:o.ZP,themeConfig:r.Z};n.default=(0,i.j)(h)},3717:function(e,n,t){"use strict";var s=t(2676);n.Z={logo:(0,s.jsx)("span",{children:"✨ Next Server Action"}),project:{link:"https://github.com/bhishekprajapati/next-server-action"}}},5184:function(){}},function(e){e.O(0,[752,888,774,179],function(){return e(e.s=5437)}),_N_E=e.O()}]);